var HashRouter=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){if(!(t instanceof Function))throw new Error("callback should be a valid function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(){function t(e,n,i){if(r(this,t),this.router=e,this.url=n,this.callback=i,this.filter={},this._preRoute=[],!(n instanceof RegExp)){var o={},u=[],s=[],a=n.split(/\/+/g).filter(function(t){return t.length>0}).map(function(t){return t.match(/^:[a-z_][a-z0-9_]*$/i)?(o[t.substr(1)]={},u.push(t.substr(1)),s.push(null),["/",o[t.substr(1)]]):(s.push(t),["/",t])});this.minLength=s.length,this.maxLength=s.length,this.url=n,this.parts=Array.prototype.concat.apply([],a),this.vars=o,this.varPos=u,this.text=s}}return o(t,[{key:"preRoute",value:function(t){return n(t),this._preRoute.push(t),this}},{key:"name",value:function(t){return this.router.routesByName[t]=this,this}},{key:"setDefault",value:function(t,e){if(!this.vars.hasOwnProperty(t))throw new Error("cannot find variable "+t);return this.vars[t]["default"]=e,this}},{key:"isCandidate",value:function(t,e){var r,n,i,o=0;if(this.minLength>t.length||this.maxLength<t.length)return!1;for(r=0,n=0;r<t.length&&n<this.text.length;++n,++r)if(null!==this.text[n]&&t[r]!==this.text[n])return!1;for(r=0,n=0;r<t.length&&n<this.text.length;++n,++r)if(null===this.text[n]){if(i=this.varPos[o++],this.filter[i]&&!this.filter[i](t[n]))return!1;if(this.router.globalFilter[i]&&!this.router.globalFilter[i](t[n]))return!1;e.push(t[n])}for(var r=0;r<this._preRoute.length;++r)if(this._preRoute[r]()===!1)return!1;return!0}},{key:"generate",value:function(t){var e=this,r=0;return this.parts.map(function(n){if("object"===("undefined"==typeof n?"undefined":i(n))){var o=e.varPos[r],u=t[r++]||n["default"];if(!u)throw new Error("cannot find variable "+n+" in the arguments");if(e.router.globalFilter[o]&&!e.router.globalFilter[o](u))throw new Error(u+" is not a valid "+o);return u}return n})}}]),t}(),s=function(){function t(){r(this,t),this.globalFilter={},this.regex=[],this.routes=[],this.routesByName={},this.globalFilter={}}return o(t,[{key:"run",value:function(){for(var t,e=arguments.length<=0||void 0===arguments[0]?document.location.hash.substr(1):arguments[0],r=e.split(/\/+/g).filter(function(t){return t.length>0}),n=0;n<this.routes.length;++n)if(t=[],this.routes[n].isCandidate(r,t))return this.routes[n].callback.apply(null,t);for(var i=0;i<this.regex.length;++i)if(e.match(this.regex[i].url))return this.regex[i].callback.apply(null,t)}},{key:"registerListener",value:function(){var t=this,e=function(){t.run()};"addEventListener"in window?window.addEventListener("hashchange",e,!1):window.onhashchange=e,e()}},{key:"url",value:function(t){if(!(this.routesByName[t]instanceof u))throw new Error("Cannot find "+t+" url");for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return this.routesByName[t].generate(r).join("")}},{key:"addFilter",value:function(t,e){return n(e),this.globalFilter[t]=e,this}},{key:"route",value:function e(t,r){var e=new u(this,t,r);return t instanceof RegExp?this.regex.push(e):this.routes.push(e),e}}]),t}();e["default"]=s,e.Router=s}]);